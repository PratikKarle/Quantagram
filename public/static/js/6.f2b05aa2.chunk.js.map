{"version":3,"sources":["shared/components/UIElements/ErrorModal.js","shared/components/UIElements/Modal.js","shared/hooks/http-hook.js","shared/components/UIElements/Card.js","shared/components/UIElements/Map.js","places/components/PlaceItem.js","places/components/PlaceList.js","places/pages/UserPlaces.js"],"names":["ErrorModal","props","React","createElement","Modal","onCancel","onClear","header","show","error","footer","Button","onClick","ModalOverlay","content","className","concat","style","headerClass","onSubmit","event","preventDefault","contentClass","children","footerClass","ReactDOM","createPortal","document","getElementById","Fragment","Backdrop","CSSTransition","in","mountOnEnter","unmountOnExit","timeout","classNames","useHttpClient","isLoading","setIsLoading","useState","setError","activeHttpRequests","useRef","sendRequest","useCallback","async","url","method","arguments","length","undefined","body","headers","HttpabortController","AbortController","current","push","response","fetch","signal","responseData","json","filter","reqCtrl","ok","Error","message","err","useEffect","forEach","abortController","abort","clearError","Card","Map","mapRef","center","zoom","map","window","google","maps","Marker","position","ref","PlaceItem","showMap","setShowMap","showConfirmModal","setshowConfirmModal","auth","useContext","AuthContext","closeMapHandler","cancelDeleteHandler","address","coordinates","inverse","danger","process","id","Authorization","token","onDeletePlace","LoadingSpinner","src","image","alt","title","description","openMapHandler","userId","creatorId","to","showDeleteWarningHandler","PlaceList","items","place","key","creator","location","onDelete","UserPlaces","loadedPlaces","setloadPlaces","useParams","places","fetchPlaces","deletedPlaceId","prevPlaces"],"mappings":"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","file":"static/js/6.f2b05aa2.chunk.js","sourcesContent":["import React from 'react';\n\nimport Modal from './Modal';\nimport Button from '../FormElements/Button';\n\nconst ErrorModal = props => {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={<Button onClick={props.onClear}>Okay</Button>}\n    >\n      <p>{props.error}</p>\n    </Modal>\n  );\n};\n\nexport default ErrorModal;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CSSTransition } from 'react-transition-group';\n\nimport Backdrop from './Backdrop';\nimport './Modal.css';\n\nconst ModalOverlay = props => {\n  const content = (\n    <div className={`modal ${props.className}`} style={props.style}>\n      <header className={`modal__header ${props.headerClass}`}>\n        <h2>{props.header}</h2>\n      </header>\n      <form\n        onSubmit={\n          props.onSubmit ? props.onSubmit : event => event.preventDefault()\n        }\n      >\n        <div className={`modal__content ${props.contentClass}`}>\n          {props.children}\n        </div>\n        <footer className={`modal__footer ${props.footerClass}`}>\n          {props.footer}\n        </footer>\n      </form>\n    </div>\n  );\n  return ReactDOM.createPortal(content, document.getElementById('modal-hook'));\n};\n\nconst Modal = props => {\n  return (\n    <React.Fragment>\n      {props.show && <Backdrop onClick={props.onCancel} />}\n      <CSSTransition\n        in={props.show}\n        mountOnEnter\n        unmountOnExit\n        timeout={200}\n        classNames=\"modal\"\n      >\n        <ModalOverlay {...props} />\n      </CSSTransition>\n    </React.Fragment>\n  );\n};\n\nexport default Modal;\n","import { useState,useCallback, useRef, useEffect } from 'react';\r\n\r\nexport const useHttpClient = () => {\r\n  const [isLoading,setIsLoading] = useState(false);\r\n  const [error,setError] = useState();\r\n\r\n    const activeHttpRequests = useRef([]);\r\n\r\n  const sendRequest = useCallback(async (url,method=\"GET\",body=null,headers={}) => \r\n  {\r\n    try{\r\n        setIsLoading(true);\r\n\r\n        const HttpabortController = new AbortController();\r\n        activeHttpRequests.current.push(HttpabortController);\r\n\r\n        const response = await fetch(url,{\r\n            method,\r\n            body,\r\n            headers,\r\n            signal:HttpabortController.signal\r\n        });\r\n  \r\n        const responseData = await response.json();\r\n\r\n        activeHttpRequests.current = activeHttpRequests.current.filter(reqCtrl => reqCtrl!== HttpabortController)\r\n        if(!response.ok)\r\n        {\r\n          throw new Error(responseData.message);\r\n        }\r\n        setIsLoading(false);\r\n        return responseData;\r\n    }\r\n    catch(err){\r\n        setError(err.message || 'Something went Wrong');\r\n        setIsLoading(false);\r\n        throw err;\r\n    }\r\n  },[])\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  }\r\n\r\n  useEffect(\r\n    ()=> {    \r\n        return ()=>{\r\n            activeHttpRequests.current.forEach(abortController => {\r\n                abortController.abort();\r\n            });\r\n        };\r\n    },[]);\r\n\r\n  return {isLoading,error,sendRequest, clearError};\r\n}","import React from 'react';\n\nimport './Card.css';\n\nconst Card = props => {\n  return (\n    <div className={`card ${props.className}`} style={props.style}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import React, { useRef, useEffect } from 'react';\n\nimport './Map.css';\n\nconst Map = props => {\n  const mapRef = useRef();\n  \n  const { center, zoom } = props;\n\n  useEffect(() => {\n    const map = new window.google.maps.Map(mapRef.current, {\n      center: center,\n      zoom: zoom\n    });\n  \n    new window.google.maps.Marker({ position: center, map: map });\n  }, [center, zoom]);  \n\n  return (\n    <div\n      ref={mapRef}\n      className={`map ${props.className}`}\n      style={props.style}\n    ></div>\n  );\n};\n\nexport default Map;\n","import React, { useState, useContext } from 'react';\n\nimport Card from '../../shared/components/UIElements/Card';\nimport Button from '../../shared/components/FormElements/Button';\nimport Modal from '../../shared/components/UIElements/Modal';\nimport Map from '../../shared/components/UIElements/Map';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport './PlaceItem.css';\nimport { AuthContext } from '../../shared/context/auth-context';\n\nconst PlaceItem = props => {\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setshowConfirmModal] = useState(false);\n  const {isLoading,error,sendRequest,clearError} = useHttpClient();\n\n  const auth = useContext(AuthContext);\n\n  const openMapHandler = () => setShowMap(true);\n\n  const closeMapHandler = () => setShowMap(false);\n\n  const showDeleteWarningHandler = () => setshowConfirmModal(true);\n\n  const cancelDeleteHandler = () => setshowConfirmModal(false);\n\n  const confirmDeleteHandler = async () => \n    {\n      setshowConfirmModal(false)\n      try{\n        await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/places/${props.id}`,'DELETE',null,          \n        {\n          Authorization: 'Bearer ' + auth.token\n        });\n        props.onDeletePlace(props.id);\n      }\n      catch(err){}\n    };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError}/>\n      <Modal\n      show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={16} />\n        </div>\n      </Modal>\n      <Modal \n      show={showConfirmModal}\n      onCancel={cancelDeleteHandler}\n      header=\"Are you sure?\" \n      footerClass=\"place-item__modal-actions\" footer={\n        <React.Fragment>\n          <Button inverse onClick={cancelDeleteHandler}>Cancel</Button>\n          <Button danger onClick={confirmDeleteHandler}>DELETE</Button>\n        </React.Fragment>\n      }>\n        <p>Do you want to delete the place? This action can't be undone after this.</p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <LoadingSpinner/>}\n          <div className=\"place-item__image\">\n            <img src={process.env.REACT_APP_ASSET_URL+\"\"+props.image} alt={props.title} />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={openMapHandler}>VIEW ON MAP</Button>\n            {auth.userId === props.creatorId && <Button to={`/places/${props.id}`}>EDIT</Button>}\n            {auth.userId === props.creatorId && <Button danger onClick={showDeleteWarningHandler}>DELETE</Button>}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default PlaceItem;\n","import React from 'react';\n\nimport Card from '../../shared/components/UIElements/Card';\nimport PlaceItem from './PlaceItem';\nimport './PlaceList.css';\nimport Button from '../../shared/components/FormElements/Button';\n\nconst PlaceList = props => {\n  if (props.items.length === 0) {\n    return (\n      <div className=\"place-list center\">\n        <Card>\n          <h2>No places found. Maybe create one?</h2>\n          <Button to=\"/places/new\">Share Place</Button>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <ul className=\"place-list\">\n      {props.items.map(place => (\n        <PlaceItem\n          key={place.id}\n          id={place.id}\n          image={place.image}\n          title={place.title}\n          description={place.description}\n          address={place.address}\n          creatorId={place.creator}\n          coordinates={place.location}\n          onDeletePlace={props.onDelete}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default PlaceList;\n","import React, {useState,useEffect} from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport PlaceList from '../components/PlaceList';\n\nconst UserPlaces = () => {\n  const {isLoading,error,sendRequest,clearError} = useHttpClient();\n  const [loadedPlaces,setloadPlaces] = useState();\n  const userId = useParams().userId;\n\n\n  useEffect(()=> {\n\n    const fetchPlaces = async () => {\n        try{\n          const responseData = await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/places/user/${userId}`);\n          setloadPlaces(responseData.places);\n      }\n      catch(err){\n      }\n    };\n    fetchPlaces();\n  },[sendRequest, userId]);\n\n  const deletePlaceHandler = (deletedPlaceId) => {\n    setloadPlaces(prevPlaces => prevPlaces.filter(place => place.id !== deletedPlaceId));\n  };\n\n  return (\n  <React.Fragment>\n    <ErrorModal error={error} onClear={clearError}/>\n    {isLoading && (<div className='center'><LoadingSpinner/></div>)}\n    {!isLoading && loadedPlaces && <PlaceList items={loadedPlaces} onDelete={deletePlaceHandler}/>}\n  </React.Fragment>);\n};\n\nexport default UserPlaces;\n"],"sourceRoot":""}